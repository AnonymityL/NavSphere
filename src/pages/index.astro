---
import Layout from '../layouts/Layout.astro';
import CategoryBlock from '../components/CategoryBlock.astro';
import Search from '../components/Search.astro';
import { build } from '../../scripts/build-data';

const { categoryBlocks } = build();
const totalCategories = categoryBlocks.length;
const totalItems = categoryBlocks.reduce((sum, block) => sum + block.items.length, 0);
---

<Layout title="NavSphere Navigation" description="Internal Navigation System">
  <header class="mb-8">
    <div class="flex items-center justify-between">
      <div>
        <h1 class="text-4xl font-bold text-gray-900 mb-2">
          Compass
        </h1>
        <p class="text-gray-600">
          Navigation System with {totalCategories} categories and {totalItems} items
        </p>
      </div>

      <div class="hidden md:flex gap-2">
        <div class="px-4 py-2 bg-white rounded-lg border border-gray-200">
          <div class="text-sm text-gray-500">Categories</div>
          <div class="text-xl font-bold text-gray-900">{totalCategories}</div>
        </div>
        <div class="px-4 py-2 bg-white rounded-lg border border-gray-200">
          <div class="text-sm text-gray-500">Items</div>
          <div class="text-xl font-bold text-gray-900">{totalItems}</div>
        </div>
      </div>
    </div>

    <div class="mt-4 text-sm text-gray-400">
      Press <kbd class="px-2 py-1 bg-gray-100 rounded text-xs font-mono">/</kbd> to search
    </div>
  </header>

  <Search />

  <main>
    {categoryBlocks.map((block) => (
      <CategoryBlock
        categoryName={block.category.name}
        categoryIcon={block.category.icon}
        categoryDescription={block.category.description}
        items={block.items}
      />
    ))}
  </main>

  <footer class="mt-12 pt-8 border-t border-gray-200 text-center text-sm text-gray-500">
    <p>
      NavSphere - Built with Astro + TypeScript + YAML
    </p>
    <p class="mt-1">
      Last updated: {new Date().toLocaleDateString()}
    </p>
  </footer>
</Layout>

<style>
  kbd {
    display: inline-block;
    padding: 0.125rem 0.375rem;
    font-size: 0.75rem;
    line-height: 1;
    color: #4b5563;
    background-color: #f3f4f6;
    border: 1px solid #d1d5db;
    border-radius: 0.25rem;
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
  }
</style>
