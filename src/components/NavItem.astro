---
interface Props {
  name: string;
  env: string;
  url: string;
  description?: string;
  icon?: string;
  disabled?: boolean;
}

const { name, env, url, description, icon = 'ðŸ”—', disabled = false } = Astro.props;
const searchText = `${name} ${env} ${description || ''}`.trim();

const colors = {
  TEST: 'bg-blue-100 text-blue-700',
  PRE: 'bg-yellow-100 text-yellow-700',
  PROD: 'bg-green-100 text-green-700'
};
const colorClass = colors[env] || colors.TEST;
---

<a
  href={url}
  target="_blank"
  rel="noopener noreferrer"
  data-searchable={searchText}
  class:list={[
    'group flex items-center gap-3 p-4 rounded-lg border border-gray-200 bg-white hover:border-blue-300 hover:shadow-md transition-all duration-200',
    'opacity-50 cursor-not-allowed hover:border-gray-200 hover:shadow-none': disabled
  ]}
  class:cursor-not-allowed={disabled}
  class:pointer-events-none={disabled}
>
  <span class="text-2xl flex-shrink-0">{icon}</span>

  <div class="flex-1 min-w-0">
    <div class="flex items-center gap-2 mb-1">
      <h3 class="font-semibold text-gray-900 truncate">{name}</h3>
      <span class:list={['inline-flex items-center px-2 py-0.5 rounded text-xs font-medium', colorClass]}>{env}</span>
    </div>
    {description && (
      <p class="text-sm text-gray-500 truncate">{description}</p>
    )}
  </div>

  <span class="text-gray-400 flex-shrink-0 opacity-0 group-hover:opacity-100 transition-opacity">â†—</span>
</a>
